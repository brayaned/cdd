Perfecto, vamos paso a paso y sin ruido, porque aquÃ­ hay varios conceptos mezclados y ya tienes casi todo listo.


---

âœ… Contexto (lo que YA tienes)

âœ” Spring Boot

âœ” DataSource configurado vÃ­a @Configuration @Bean

âœ” ID String (no es el problema)

âœ” Quieres SQL puro, editable cuando quieras

âœ” Solo guardar un catÃ¡logo

âŒ NO usar JPA Repository

âŒ NO auditorÃ­a


ğŸ‘‰ Entonces NO necesitas JpaRepository, ni clase Id, ni @Entity siquiera para este caso.


---

ğŸ”‘ Respuesta corta a tu Ãºltima pregunta

> Â¿Ya tengo configurado el datasource, solo agrego esa dependencia?



ğŸ‘‰ SÃ­. SOLO agrega esta dependencia (si no la tienes):

<!-- JDBC bÃ¡sico de Spring -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-jdbc</artifactId>
</dependency>

ğŸš« NO necesitas:

spring-boot-starter-data-jpa

Hibernate

JpaRepository

@IdClass

Clases ID



---

ğŸ§  QuÃ© vamos a usar en lugar de JPA

ğŸ‘‰ JdbcTemplate o NamedParameterJdbcTemplate

âœ” Ventajas:

SQL 100% controlado por ti

FÃ¡cil de modificar

Ideal para catÃ¡logos

Muy usado en banca



---

ğŸ§± Ejemplo real: Repository con SQL puro

ğŸ“¦ Paquete sugerido

package com.santander.bnc.bsn023.bncbsn023siarbackendj.app.repository;


---

âœ… Repository usando JdbcTemplate

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

@Repository
public class CatalogoRepository {

    private final JdbcTemplate jdbcTemplate;

    public CatalogoRepository(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    public int guardarCatalogo(
            String codigo,
            String descripcion
    ) {

        String sql = """
            INSERT INTO CDDLAFT.CDDLAFT_CATALOGOS
            (CODIGO, DESCRIPCION)
            VALUES (?, ?)
        """;

        return jdbcTemplate.update(
                sql,
                codigo,
                descripcion
        );
    }
}

âœ” El SQL lo puedes editar cuando quieras
âœ” Retorna filas afectadas
âœ” Cero JPA


---

ğŸ” Si quieres SQL aÃºn mÃ¡s limpio (recomendado)

Usando NamedParameterJdbcTemplate

import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
import org.springframework.stereotype.Repository;

import java.util.HashMap;
import java.util.Map;

@Repository
public class CatalogoRepository {

    private final NamedParameterJdbcTemplate jdbcTemplate;

    public CatalogoRepository(NamedParameterJdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    public int guardarCatalogo(String codigo, String descripcion) {

        String sql = """
            INSERT INTO CDDLAFT.CDDLAFT_CATALOGOS
            (CODIGO, DESCRIPCION)
            VALUES (:codigo, :descripcion)
        """;

        Map<String, Object> params = new HashMap<>();
        params.put("codigo", codigo);
        params.put("descripcion", descripcion);

        return jdbcTemplate.update(sql, params);
    }
}

âœ” Mucho mÃ¡s legible
âœ” Ideal cuando el SQL crece


---

ğŸ§ª Service (opcional, pero recomendado)

import org.springframework.stereotype.Service;

@Service
public class CatalogoService {

    private final CatalogoRepository repository;

    public CatalogoService(CatalogoRepository repository) {
        this.repository = repository;
    }

    public void crearCatalogo(String codigo, String descripcion) {
        repository.guardarCatalogo(codigo, descripcion);
    }
}


---

ğŸš« QuÃ© NO hacer (y por quÃ© te saliÃ³ el error)

âŒ public interface XRepository extends JpaRepository<Entity, String>

Eso obliga a JPA

Exige un @Id

Exige entidad bien mapeada

Exige contexto Hibernate


ğŸ‘‰ Si usas SQL puro, NO heredes de JpaRepository


---

ğŸ Resumen claro

âœ” SÃ­, solo agrega:

spring-boot-starter-jdbc

âœ” Usa:

JdbcTemplate o NamedParameterJdbcTemplate


âŒ No uses:

JpaRepository

@IdClass

JPA para catÃ¡logos simples



---

Si quieres, en el siguiente mensaje puedo:

ğŸ”¹ Adaptar el SQL a Oracle (MERGE / SEQUENCE)

ğŸ”¹ Hacer UPDATE / DELETE

ğŸ”¹ Externalizar el SQL a .sql

ğŸ”¹ Manejar errores SQL bancarios (DataAccessException)

ğŸ”¹ Hacer batch insert


Dime y lo dejamos nivel banco ğŸ’¼âœ”ï¸
